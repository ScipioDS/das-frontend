<div class="dialog-container">
  <h2 mat-dialog-title>{{ isAddMode ? 'Create Cryptocurrency' : 'Edit Cryptocurrency' }}</h2>

  <mat-dialog-content>
    <form [formGroup]="model" class="crypto-form">
      @if (errorMessage) {
        <div class="alert alert-danger mb-3" role="alert">
          {{ errorMessage }}
        </div>
      }

      <mat-form-field appearance="outline" class="w-100 mb-3">
        <mat-label>Ticker Symbol</mat-label>
        <input
          matInput
          formControlName="ticker"
          placeholder="e.g., BTC"
          [readonly]="!isAddMode"
        >
        @if (model.get('ticker')?.hasError('required') && model.get('ticker')?.touched) {
          <mat-error>Ticker is required</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-100 mb-3">
        <mat-label>Name</mat-label>
        <input
          matInput
          formControlName="name"
          placeholder="e.g., Bitcoin"
        >
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-100 mb-3">
        <mat-label>Price (USD)</mat-label>
        <input
          matInput
          type="number"
          formControlName="price"
          placeholder="0.00"
          step="0.01"
        >
        @if (model.get('price')?.hasError('required') && model.get('price')?.touched) {
          <mat-error>Price is required</mat-error>
        }
      </mat-form-field>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button
      mat-button
      (click)="cancel()"
      [disabled]="isSubmitting"
    >
      Cancel
    </button>
    <button
      mat-raised-button
      color="primary"
      (click)="submit()"
      [disabled]="isSubmitting || model.invalid"
    >
      @if (isSubmitting) {
        <mat-spinner diameter="20" class="d-inline-block me-2"></mat-spinner>
      }
      {{ isAddMode ? 'Create' : 'Update' }}
    </button>
  </mat-dialog-actions>
</div>
